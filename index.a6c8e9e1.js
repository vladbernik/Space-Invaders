var e=globalThis,t={},n={},r=e.parcelRequiref13a;null==r&&((r=function(e){if(e in t)return t[e].exports;if(e in n){var r=n[e];delete n[e];var i={id:e,exports:{}};return t[e]=i,r.call(i.exports,i,i.exports),i.exports}var o=Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,t){n[e]=t},e.parcelRequiref13a=r);var i=r.register;i("27Lyk",function(e,t){Object.defineProperty(e.exports,"register",{get:()=>n,set:e=>n=e,enumerable:!0,configurable:!0});var n,r=new Map;n=function(e,t){for(var n=0;n<t.length-1;n+=2)r.set(t[n],{baseUrl:e,path:t[n+1]})}}),i("cAXVR",function(e,t){var n;Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=void 0,e.exports.default=(Object.defineProperty(n=function e(t,n,r,i,o){(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,e),this.img=t,this.x=n,this.y=r,this.w=i,this.h=o},"prototype",{writable:!1}),n)}),i("4kYFK",function(e,t){var n,r;function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=void 0,e.exports.default=(n=function e(t,n,r,i){(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,e),this.x=t,this.y=n,this._sprite=r,this.sprite=this._sprite,this.hp=i},r=[{key:"draw",value:function(e){e.drawImage(this._sprite.img,this._sprite.x,this._sprite.y,this._sprite.w,this._sprite.h,this.x,this.y,this._sprite.w,this._sprite.h)}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,function(e){var t=function(e,t){if("object"!=i(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=i(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==i(t)?t:t+""}(r.key),r)}}(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n)}),i("6Kf79",function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=void 0;var n,i,o=r("6LU9t");function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}e.exports.default=(n=function e(t,n,r,i,o,a,s){(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,e),this.x=t,this.y=n,this.vy=r,this.w=i,this.h=o,this.color=a,this.isActive=!0,this.isEnemy=s},i=[{key:"update",value:function(e,t){this.y+=this.vy,this.isActive&&(this.isEnemy||this.handleCollisionWithAliens(t.aliens),this.handleCollisionWithBunkers(t.bunkers),this.handleCollisionWithCannon(t.cannon))}},{key:"draw",value:function(e){e.fillStyle=this.color,e.fillRect(this.x,this.y,this.w,this.h)}},{key:"checkCollisionWithObject",value:function(e){return this.x<e.x+e.sprite.w&&this.x+this.w>e.x&&this.y<e.y+e.sprite.h&&this.y+this.h>e.y}},{key:"handleCollisionWithCannon",value:function(e){if(this.checkCollisionWithObject(e)){e.hp--,this.isActive=!1;return}}},{key:"handleCollisionWithAliens",value:function(e){for(var t=0;t<e.length;t++)if(this.checkCollisionWithObject(e[t])){e[t].hp--,this.isActive=!1,e[t].hp<=0&&((0,o.handleEnemyKill)(),e.splice(t,1));return}}},{key:"handleCollisionWithBunkers",value:function(e){for(var t=0;t<e.length;t++)if(this.checkCollisionWithObject(e[t])){e[t].hp--,this.isActive=!1,e[t].hp<=0&&e.splice(t,1);return}}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,function(e){var t=function(e,t){if("object"!=a(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=a(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==a(t)?t:t+""}(r.key),r)}}(n.prototype,i),Object.defineProperty(n,"prototype",{writable:!1}),n)}),i("6LU9t",function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.draw=function(e,t){var n=e.getContext("2d");n.clearRect(0,0,e.width,e.height),y.aliens.forEach(function(e){return e.draw(n,t)}),y.cannon.draw(n),y.bullets.forEach(function(e){return e.draw(n)}),y.bunkers.forEach(function(e){return e.draw(n)});for(var r=0;r<y.cannon.hp;r++){var i=10+30*r,o=e.height-40;n.drawImage(y.cannon._sprite.img,y.cannon._sprite.x,y.cannon._sprite.y,y.cannon._sprite.w,y.cannon._sprite.h,i,o,y.cannon._sprite.w,y.cannon._sprite.h)}n.font="bold 20px monospace",n.fillStyle="#fff",n.textAlign="left",n.fillText("Score: "+y.score,0,20),y.gameOver&&0===y.aliens.length?(n.fillStyle="rgba(0, 0, 0, 0.5)",n.fillRect(0,0,u.canvas.width,u.canvas.height),n.font="bold 50px monospace",n.fillStyle="#fff",n.textAlign="center",n.fillText("You Win!",u.canvas.width/2,u.canvas.height/2),n.font="bold 30px monospace",n.fillText("Score: "+y.score,u.canvas.width/2,u.canvas.height/2+50),n.font="bold 20px monospace",n.fillText("Press 'N' for New Game",u.canvas.width/2,u.canvas.height/2+100)):y.gameOver&&(n.fillStyle="rgba(0, 0, 0, 0.5)",n.fillRect(0,0,u.canvas.width,u.canvas.height),n.font="bold 50px monospace",n.fillStyle="#fff",n.textAlign="center",n.fillText("Game Over",u.canvas.width/2,u.canvas.height/2),n.font="bold 30px monospace",n.fillText("Score: "+y.score,u.canvas.width/2,u.canvas.height/2+50),n.font="bold 20px monospace",n.fillText("Press 'N' for New Game",u.canvas.width/2,u.canvas.height/2+100))},e.exports.handleEnemyKill=function(){v++,y.score+=10,v%10==0&&(b=!0,setTimeout(function(){b=!1},5e3))},e.exports.init=function(e){for(var t=0;t<6;t++)y.bunkers.push(new c.default(70+70*t,e.height-140,h.bunker,8));for(var n=[{type:0,hp:1},{type:1,hp:3},{type:0,hp:1},{type:0,hp:1},{type:2,hp:3},{type:0,hp:1}],r=0,i=n.length;r<i;r++)for(var a=0;a<10;a++){var l=n[r],f=l.type,p=l.hp,d=30+30*a,v=30+30*r;1===f&&(d+=3),y.aliens.push(new s.default(d,v,h.aliens[f],p))}y.cannon=new o.default(100,e.height-100,h.cannon,5),u.mainSound.play()},e.exports.preload=function(e){(n=new Image).addEventListener("load",function(){h.cannon=new i.default(n,62,0,22,16),h.bunker=new i.default(n,84,8,36,24),h.aliens=[[new i.default(n,0,0,22,16),new i.default(n,0,16,22,16)],[new i.default(n,22,0,16,16),new i.default(n,22,16,16,16)],[new i.default(n,38,0,24,16),new i.default(n,38,16,24,16)]],e()}),n.src=f.default},e.exports.resetGame=w,e.exports.update=function(e,t){if(m.isDown("ArrowLeft")&&(y.cannon.x-=4,y.cannon.x<0&&(y.cannon.x=u.canvas.width)),m.isDown("ArrowRight")&&(y.cannon.x+=4,y.cannon.x>u.canvas.width&&(y.cannon.x=0)),m.isPressed("Space")){var n=y.cannon.x+10,r=y.cannon.y;y.bullets.push(new a.default(n,r,-8,2,6,"#fff",!1)),u.bulletSound.play()}(function(){var e=Date.now();if(e-g>=100){var t=Math.floor(Math.random()*y.aliens.length),n=y.aliens[t];if(n){var r=n.x,i=n.y+n.sprite.h,o=3,s="#fff";b&&(o=10,s="#ff0000"),y.bullets.push(new a.default(r,i,o,2,6,s,!0))}g=e}})(),m.isPressed("KeyN")&&w(),y.cannon.hp<=0&&(y.gameOver=!0,m.isPressed("KeyN")&&w()),0===y.aliens.length&&(y.gameOver=!0,m.isPressed("KeyN")&&w()),y.bullets.forEach(function(t){t.update(e,y),(t.y<0||t.y>u.canvas.height)&&(t.isActive=!1)}),y.bullets=y.bullets.filter(function(e){return e.isActive}),y.aliens.forEach(function(e){e.x+=1*d}),y.aliens.some(function(e){return e.x<=0||e.x>=u.canvas.width-e._spriteA.w})&&(d*=-1,y.aliens.forEach(function(e){e.y+=30}))};var n,i=p(r("cAXVR")),o=p(r("4kYFK")),a=p(r("6Kf79")),s=p(r("759j9")),l=p(r("6oGBL")),u=r("4CEV9"),f=p(r("frOEQ")),c=p(r("aoslD"));function p(e){return e&&e.__esModule?e:{default:e}}var h={aliens:[],cannon:null,bunker:null},y={bullets:[],aliens:[],cannon:null,bunkers:[],gameOver:!1,score:0},d=1,v=0,b=!1,m=new l.default;function w(){y.bullets=[],y.aliens=[],y.gameOver=!1,y.score=0,d=1,v=0,b=!1;for(var e=[{type:0,hp:1},{type:1,hp:3},{type:0,hp:1},{type:0,hp:1},{type:2,hp:3},{type:0,hp:1}],t=0,n=e.length;t<n;t++)for(var r=0;r<10;r++){var i=e[t],a=i.type,l=i.hp,f=30+30*r,p=30+30*t;1===a&&(f+=3),y.aliens.push(new s.default(f,p,h.aliens[a],l))}y.cannon=new o.default(100,u.canvas.height-100,h.cannon,5),y.bunkers=[];for(var m=0;m<6;m++)y.bunkers.push(new c.default(70+70*m,u.canvas.height-140,h.bunker,8))}var g=0}),i("759j9",function(e,t){var n,r;function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=void 0,e.exports.default=(n=function e(t,n,r,i){var a=function(e){if(Array.isArray(e))return e}(r)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,u=!1;try{for(o=(n=n.call(e)).next;!(l=(r=o.call(n)).done)&&(s.push(r.value),2!==s.length);l=!0);}catch(e){u=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(r,2)||function(e,t){if(e){if("string"==typeof e)return o(e,2);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,2)}}(r,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),s=a[0],l=a[1];(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,e),this.x=t,this.y=n,this._spriteA=s,this._spriteB=l,this.sprite=this._spriteA,this.hp=i},r=[{key:"draw",value:function(e,t){var n=Math.ceil(t/1e3)%2==0?this._spriteA:this._spriteB;e.drawImage(n.img,n.x,n.y,n.w,n.h,this.x,this.y,n.w,n.h)}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,function(e){var t=function(e,t){if("object"!=i(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=i(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==i(t)?t:t+""}(r.key),r)}}(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n)}),i("6oGBL",function(e,t){var n,r;function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=void 0,e.exports.default=(n=function e(){var t=this;(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,e),this.down={},this.pressed={},document.addEventListener("keydown",function(e){t.down[e.code]=!0}),document.addEventListener("keyup",function(e){delete t.down[e.code],delete t.pressed[e.code]}),document.addEventListener("keydown",function(e){"KeyR"===e.code&&startNewGame()})},r=[{key:"isDown",value:function(e){return this.down[e]}},{key:"isPressed",value:function(e){if(this.pressed[e]);else if(this.down[e])return this.pressed[e]=!0;return!1}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,function(e){var t=function(e,t){if("object"!=i(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=i(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==i(t)?t:t+""}(r.key),r)}}(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n)}),i("4CEV9",function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.mainSound=e.exports.canvas=e.exports.bulletSound=void 0,e.exports.stopGame=u;var n,i,o=r("6LU9t"),a=e.exports.canvas=document.getElementById("cnvs");a.width=600,a.height=window.innerHeight;var s=e.exports.bulletSound=document.createElement("audio");s.src=new URL(r("5L3WE")),document.body.appendChild(s);var l=e.exports.mainSound=document.createElement("audio");function u(){window.cancelAnimationFrame(i)}l.src=new URL(r("f9KBl")),document.body.appendChild(l),document.body.addEventListener("click",function(){l.play().then(function(){console.log("Аудио успешно воспроизведено")}).catch(function(e){console.error("Произошла ошибка при воспроизведении аудио:",e)})}),(0,o.preload)(function(){n=performance.now(),i=null,(0,o.init)(a),function e(t){i=window.requestAnimationFrame(e);var r=0;t>n+15&&(r=Math.floor((t-n)/15));for(var s=0;s<r;s++)n+=15,(0,o.update)(n,u);(0,o.draw)(a,t)}()})}),i("5L3WE",function(e,t){e.exports=new URL("shoot.f2ef2848.wav",import.meta.url).toString()}),i("f9KBl",function(e,t){e.exports=new URL("spaceinvaders1.5f2b9770.mpeg",import.meta.url).toString()}),i("frOEQ",function(e,t){e.exports=new URL("invaders.530a144b.png",import.meta.url).toString()}),i("aoslD",function(e,t){var n,r;function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=void 0,e.exports.default=(n=function e(t,n,r,i){(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,e),this.x=t,this.y=n,this.sprite=r,this.hp=i},r=[{key:"draw",value:function(e){e.drawImage(this.sprite.img,this.sprite.x,this.sprite.y,this.sprite.w,this.sprite.h,this.x,this.y,this.sprite.w,this.sprite.h);var t=e.fillStyle;e.fillStyle="#ffffff",e.fillText(this.hp.toString(),this.x,this.y),e.fillStyle=t}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,function(e){var t=function(e,t){if("object"!=i(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=i(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==i(t)?t:t+""}(r.key),r)}}(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n)}),r("27Lyk").register(new URL("",import.meta.url).toString(),JSON.parse('["9vqfN","index.a6c8e9e1.js","e3MrP","invaders.530a144b.png","eL7dN","shoot.f2ef2848.wav","eTXMP","spaceinvaders1.5f2b9770.mpeg"]')),r("4CEV9");
//# sourceMappingURL=index.a6c8e9e1.js.map
